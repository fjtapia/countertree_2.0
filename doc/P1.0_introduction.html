<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
    <meta name="generator" content="HTML Tidy for Windows (vers 1st November 2003), see www.w3.org" />
    <title>Boost C++ Libraries</title>
    <link rel="icon" href="img/favicon.ico" type="image/ico" />
    <link rel="stylesheet" type="text/css" href="css/section-welcome.css" />
    <link rel="stylesheet" type="text/css" href="css/code.css" />
    <!--[if IE 7]> <style type="text/css"> body { behavior: url(/style-v2/csshover3.htc); } </style> <![endif]-->
    <meta name="google-site-verification" content="mpr2HgFpodnbF_8fv4qXd9roIClVwtX3C-Kd3F6r61w" />
    <!--
Note: Editing website content is documented at:http://www.boost.org/development/website_updating.html-->
  </head>
  <body>
    <div id="heading">
      <div class="heading-inner">
        <h1 class="heading-title"> <a href="http://www.boost.org/"> <img src="img/space.png"
              alt="Boost C++ Libraries" class="heading-logo" /> <span class="heading-boost">Boost</span>
            <span class="heading-cpplibraries">C++ Libraries</span> <img style="width: 300px; height: 80px;"
              alt="Preliminary" src="img/preliminary.gif" /> </a></h1>
        <p class="heading-quote"> <q>...one of the most highly regarded and
            expertly designed C++ library projects in the world.</q> <span class="heading-attribution">—
            <a href="http://www.gotw.ca/" class="external">Herb Sutter</a> and <a
              href="http://en.wikipedia.org/wiki/Andrei_Alexandrescu" class="external">Andrei
              Alexandrescu</a>, <a href="http://safari.awprofessional.com/?XmlId=0321113586"
              class="external">C++ Coding Standards</a></span></p>
      </div>
    </div>
    <div class="clear"> </div>
    <div class="cuerpo_central"> <br />
      <div class="cuerpo_texto"> <br />
        <span style="font-size: 24pt;"> <span style="font-weight: bold; color: black;">
            <a href="index.html">The [ Counter Tree + Suballocator ] Library</a>
          </span></span><br />
        <div>
          <div class="author">
            <h3 class="author"><br />
              <span class="firstname"></span></h3>
            <h3 style="font-size: 10pt; font-style: italic; font-weight: bold" class="author">
              <span style="font-weight: bold;"><span class="firstname" style="font-weight: bold;">Francisco
                  Jose Tapia</span>   Copyright © 2010-2013 Francisco Jose Tapia</span></h3>
          </div>
        </div>
        <div class="legalnotice">
          <p><span style="font-size: 10pt; font-style: italic; font-weight: bold">Distributed
              under the Boost Software License, Version 1.0. (See accompanying
              file LICENSE_1_0.txt or copy at <a href="file:///LICENSE_1_0.txt"
                target="_top"> http://www.boost.org/LICENSE_1_0.txt )</a></span>
          </p>
        </div>
        <br />
        <br />
        <br />
        <div class="caja_menu"> <span style="font-size: 16pt; color: black;"><br />
            Table of Contents</span> <br />
          <div style="margin-left: 40px;">
            <div style="margin-left: 40px;"> <a href="P1.0_introduction.html#introduction">1.-
                Introduction</a><br />
              <div style="margin-left: 40px;"><a href="P1.0_introduction.html#countertree">1.1.-
                  Description of the Counter Trees</a><br />
                <a href="P1.0_introduction.html#benchmark">1.2.- Benchmark of
                  parallel algorithms</a><br />
                <a href="P1.3.0_new_elements.html#new_elements">1.3.- New
                  elements of the library</a><br />
                <div style="margin-left: 40px;"><a href="P1.3.0_new_elements.html#position">1.3.1.-
                    Access by position and random access iterators </a> <br />
                  <a href="P1.3.0_new_elements.html#deletion">1.3.2.- Deletion
                    in the first/last position</a><br />
                </div>
                <div style="margin-left: 40px;"><a href="P1.3.0_new_elements.html#iterators">1.3.3.-
                    Iterators</a></div>
                <div style="margin-left: 40px;"> <a href="P1.3.4_description_suballocators.html#suballocator">1.3.4.-
                    Memory Problems (Suballocators<span style="color: #0000a0;">)</span></a><br />
                  <a href="P1.3.4_description_suballocators.html#countertree_suballocator">1.3.5.-
                    Description of Counter Trees + Suballocators </a><br />
                  <a href="P1.3.6_lock_system.html#lock">1.3.6.- New Lock system
                    (Single Write Multiple Read Mutex)</a> <br />
                  1<a href="P1.3.6_lock_system.html#new_functions">.3.7.- Safe
                    concurrent programming. (New functions)</a><br />
                </div>
                <a href="P1.4_class_structure.html#class_structure">1.4.- Class
                  structure Code description</a><br />
                <div style="margin-left: 40px;"> <a href="P1.4_class_structure.html#description">1.4.1.-
                    Description of the classes of the library</a><br />
                </div>
                <a href="P1.5.0_future.html#next_improvements">1.5.- Future
                  Improvements</a><br />
                <div style="margin-left: 40px;"><a href="P1.5.0_future.html#strategies">1.5.1-
                    Strategies for many core Systems. Parallel algorithms for
                    very large trees</a> <br />
                </div>
                <div style="margin-left: 40px;"><a href="P1.5.0_future.html#redesign">1.5.2-
                    Redesign of the internal algorithm</a><br />
                  <a href="P1.5.0_future.html#augmented">1.5.3- Augmented trees</a></div>
                <br />
                <br />
              </div>
            </div>
          </div>
        </div>
        <br />
        <br />
        <br />
        <p><a name="introduction"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">1.-
            Introduction</span></p>
        <p> </p>
        This project is the joining of two separate ideas, the countertrees and
        the suballocators. Each one have it own sense and utility. But they are
        complementarity, and working joined express the goal of this project,
        providing tools for to improve the user's work.<br />
        <br />
        <br />
        <p><a name="countertree"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">1.1.-
            Description of the Counter Trees</span></p>
        <br />
        <p> The counter trees are red-black trees where each node have an
          additional counter. This counter represent the number of nodes under
          it, including itself. This counter permit us to access to the elements
          by the position, in the same way than a vector. It is a random access
          container and, of course, random access iterators. </p>
        <p><br />
        </p>
        <p>This library is an implementation of a counter tree with pointers to
          the first and last elements . </p>
        <p> <img align="middle" src="img/physic-logic.png" style="border: 25px solid white;"
            alt="Example of Counter Tree" /> </p>
        <p><br />
        </p>
        <p>I didn't find any implementation of the binary Counter Trees, except
          my version of 14 years ago. Due this, <span style="font-weight: bold;">all
            the algorithms for insert, delete, sort, find and balance was
            created and developed specifically for this project, and they are
            not based in any previous code or implementation.</span> </p>
        <p><br />
        </p>
        The basic idea of this class is simple, you can use like a vector. It
        permit access to the elements by their position. The allocators are
        random access, like in a vector. The insertion or deletion of one
        element don't imply any movement of data. It's only insertion or
        deletion of a node in the tree. <span style="font-weight: bold;">The
          operations of  insertion, deletion and access to elements are
          O(log(N)) operations.<br />
          <br />
        </span>
        <p> In the <span style="font-weight: bold;"> multi core process</span>,
          the traditional trees ( STL set, multiset, map and multimap) have a
          great problem. If you have 4000 element in a map, and want to be
          processed by 4 cores. Each core need an iterator to it first element,
          and a integer with the number of elements to process. The thread 0,
          have begin( ) and 1000, but the thread 1 for to obtain an iterator to
          the position 1000, need travel sequentially all the nodes from the
          position 0 to the 1000. </p>
        <p><br />
        </p>
        <p>The counter tree don't have the problem described before, the
          iterators are random access and let it go directly. With the counter
          trees, to distribute the elements of the tree over an arbitrary number
          of cores is equal than to do with a vector. This is the key for to
          design parallel algorithms for these data structures.</p>
        <p><br />
        </p>
        <p>Based on the Counter Trees we have two kind of data structures :</p>
        <ul style="margin-left: 40px;">
          <li>With unordered elements ( vector_tree)</li>
          <li>With ordered elements ( set, multiset, map and multimap)</li>
        </ul>
        <br />
        <br />
        <p><span style="font-size:16pt">COUNTER TREE WITH UNORDERED ELEMENTS</span></p>
        <p style="margin-left: 40px;"><br />
        </p>
        <p style="margin-left: 40px;">With <span style="font-weight: bold;">unordered
            elements</span>, you have a <span style="font-weight: bold;">vector_tree</span>.
          It is like a vector with identical interface, identical operations
          than std::vector and std::deque . The difference is the performance. </p>
        <ul style="margin-left: 80px;">
          <li>The<span style="font-weight: bold;"> vector_tree</span> have the
            same speed inserting or deleting in any position. </li>
          <li>The <span style="font-weight: bold;">std::vector</span> it is
            very fast inserting and deleting in the first or in the last
            position, but very slow inserting or deleting in central positions.
          </li>
        </ul>
        <p style="margin-left: 40px;"><br />
        </p>
        <p style="margin-left: 40px;">The <span style="font-weight: bold;">vector_tree</span>
          is slower than the std::vector inserting or deleting in the first and 
          last position, but  much more faster inserting or deleting in central
          positions. This class don't pretend replace to the std::vector or
          queue. It is only other alternative, useful in several problems, like
          the priority queues implementation because don't have the limitations
          of the implementations based on vectors or based on trees like set or
          map.</p>
        <p style="margin-left: 40px;"><br />
        </p>
        <p style="margin-left: 40px;">In the library, you have an concurrent
          implementation ( vector_tree_cnc) , which is thread safe for all the
          operations of the class( insertion, deletion, lectures and
          modification), and a non concurrent version ( vector_tree).<br />
        </p>
        <br />
        <br />
        <p><span style="font-size:16pt">COUNTER TREE WITH ORDERED ELEMENTS</span></p>
        <div style="margin-left: 40px;"> <br />
          With <span style="font-weight: bold;">ordered elements</span>, you
          have in the namespace countertree the classes <span style="font-weight: bold;">set,
            multiset, map and multimap</span>. They have the same interface than
          the STL std::set, std::multiset, std::map,std::multimap classes, plus
          the capacity of access to the elements by the position like in a
          vector. <br />
          <br />
          The iterators are random access. You can subtract two iterators for to
          know the number of elements between them. <br />
          <br />
          You have the <span style="font-weight: bold;">concurrent version
            set_cnc , multiset_cnc, map_cnc and multimap_cnc,</span>  which
          permit the concurrency of any operations, insertion , deletion ,
          lectures and modification in  safe way, and a non concurrent version
          for to work with only 1 thread.<br />
          <br />
          <br />
          <br />
        </div>
          <br />
        <p><a name="benchmark"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">1.2.-
            Benchmark of Parallel Algorithms</span></p>
        <br />
        <p>The best way to evaluate the Counter Trees is examining their
          performance using parallel algorithms. These benchmarks are done with
          the GCC compiler under Linux 64 bits ( the results are similar with
          others compilers and operating systems) </p>
        <p><br />
        </p>
        <p><br />
        </p>
        <img src="img/benchmark_set_intersection_cnc.png" alt="benchmark set intersection" />
        <p><br />
        </p>
        <img src="img/benchmark_map_cnc_01.png" alt="benchmark map cnc" /><br />
        <br />
        <img src="img/benchmark_vector_tree_cnc.png" alt="benchmark vector_tree_cnc" /><br />
        <br />
        <a title="suballocator " href="P1.3.0_new_elements.html#new_elements" style="float:right"><img
            alt="suballocator description" src="img/next.png" /></a> <a title="introduction"
          href="P1.0_introduction.html" style="float:right"><img alt="go to head of the page"
            src="img/up.png" /></a> <a title="home page" href="index.html" style="float:right"><img
            src="img/prev.png" alt="previous page" /></a> <a title="home page"
          href="index.html" style="float:right"><img src="img/home.png" alt="home page" /></a>
      </div>
      <table width="100%" xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision">
        <tbody>
          <tr>
            <td align="left">
              <p><small>Last revised: September  30, 2012 at 21:42:41 GMT</small></p>
            </td>
            <td> <br />
            </td>
          </tr>
        </tbody>
      </table>
      <hr />
      <div id="footer">
        <div id="footer-left">
          <div id="copyright">
            <p>Copyright Francisco Jose Tapia 2010-2012.</p>
          </div>
          <div id="license">
            <p>Distributed under the <a href="/LICENSE_1_0.txt" class="internal">Boost
                Software License, Version 1.0</a>.</p>
          </div>
        </div>
        <div id="footer-right">
          <div id="banners">
            <p id="banner-xhtml"> <a href="http://validator.w3.org/check?uri=referer"
                class="external">XHTML 1.0</a></p>
            <p id="banner-css"> <a href="http://jigsaw.w3.org/css-validator/check/referer"
                class="external">CSS</a></p>
            <p id="banner-osi"> <a href="http://www.opensource.org/docs/definition.php"
                class="external">OSI Certified</a></p>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
